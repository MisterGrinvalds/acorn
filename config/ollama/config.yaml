# Ollama component configuration
name: ollama
description: Ollama local AI model management
version: 1.0.0

# Environment variables
env:
  OLLAMA_HOME: "${OLLAMA_HOME:-$HOME/.ollama}"

# Shell aliases
aliases:
  ollama-start: "acorn ollama start"
  ollama-stop: "acorn ollama stop"
  ollama-status: "acorn ollama status"
  ollama-models: "acorn ollama models"
  ollama-examples: "acorn ollama examples"

# Wrapper functions
wrappers:
  - name: ollama_status
    command: "acorn ollama status"

  - name: ollama_models
    command: "acorn ollama models"

  - name: ollama_start
    command: "acorn ollama start"

  - name: ollama_stop
    command: "acorn ollama stop"

  - name: ollama_install
    command: "acorn ollama install"

  - name: ollama_examples
    command: "acorn ollama examples"

# Shell functions (interactive, custom usage messages)
shell_functions:
  # Pull model with usage hint
  ollama_pull: |
    if [ -z "$1" ]; then
        echo "Usage: ollama_pull <model_name>"
        echo "Popular models: llama3.2, codellama, mistral, phi3, gemma2"
        return 1
    fi
    acorn ollama pull "$1"

  # Remove model with model list
  ollama_remove: |
    if [ -z "$1" ]; then
        echo "Usage: ollama_remove <model_name>"
        acorn ollama models
        return 1
    fi
    acorn ollama rm "$1"

  # Quick chat with validation
  ollama_chat: |
    if [ -z "$1" ] || [ -z "$2" ]; then
        echo "Usage: ollama_chat <model_name> <prompt>"
        return 1
    fi
    acorn ollama chat "$1" "$2"

  # Code generation with validation
  ollama_code: |
    if [ -z "$1" ] || [ -z "$2" ]; then
        echo "Usage: ollama_code <language> <description>"
        return 1
    fi
    acorn ollama code "$1" "$2"

  # Run model interactively
  ollama_run: |
    if [ -z "$1" ]; then
        echo "Usage: ollama_run <model_name>"
        acorn ollama models
        return 1
    fi

    if ! command -v ollama >/dev/null 2>&1; then
        echo "Ollama not installed. Run: acorn ollama install"
        return 1
    fi

    echo "Starting interactive session with $1"
    ollama run "$1"
