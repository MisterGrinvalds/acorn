# Ghostty component configuration
name: ghostty
description: Ghostty terminal emulator configuration
version: 1.0.0

# Environment variables
env:
  GHOSTTY_CONFIG: "${XDG_CONFIG_HOME:-$HOME/.config}/ghostty/config"
  GHOSTTY_RESOURCES_DIR: "${XDG_CONFIG_HOME:-$HOME/.config}/ghostty"

# Shell aliases
aliases:
  ghostty-config: "ghostty_config"
  ghostty-themes: "ghostty +list-themes"
  ghostty-help: "ghostty +help"
  ghostty-dark: 'acorn ghostty theme "Catppuccin Mocha"'
  ghostty-light: 'acorn ghostty theme "Catppuccin Latte"'

# Wrapper functions that call acorn commands
wrappers:
  - name: ghostty_theme
    command: "acorn ghostty theme"

  - name: ghostty_font
    command: "acorn ghostty font"

  - name: ghostty_backup
    command: "acorn ghostty backup"

  - name: ghostty_backups
    command: "acorn ghostty backups"

  - name: ghostty_restore
    command: "acorn ghostty restore"

  - name: ghostty_info
    command: "acorn ghostty info"

# Shell functions (need $EDITOR)
shell_functions:
  ghostty_config: |
    local config="${GHOSTTY_CONFIG:-$HOME/.config/ghostty/config}"

    if [ ! -f "$config" ]; then
        echo "Ghostty config not found: $config"
        return 1
    fi

    ${EDITOR:-vim} "$config"
    echo "Config saved. Press Cmd+Shift+, (macOS) or Ctrl+Shift+, (Linux) to reload."

# Config files to generate
files:
  - target: "${XDG_CONFIG_HOME}/ghostty/config"
    format: ghostty
    schema:
      theme: { type: string, default: "Catppuccin Mocha" }
      font-family: { type: string, default: "JetBrainsMono Nerd Font" }
      font-size: { type: int, default: 14 }
      font-thicken: { type: bool, default: true }
      adjust-cell-height: { type: string, default: "10%" }
      window-padding-x: { type: int, default: 8 }
      window-padding-y: { type: int, default: 8 }
      window-decoration: { type: bool, default: true }
      macos-titlebar-style: { type: string, default: tabs }
      macos-option-as-alt: { type: bool, default: true }
      confirm-close-surface: { type: bool, default: false }
      shell-integration: { type: string, default: detect }
      shell-integration-features: { type: string, default: "cursor,sudo,title" }
      title: { type: string, default: " " }
      window-inherit-working-directory: { type: bool, default: true }
      gtk-tabs-location: { type: string, default: top }
      cursor-style: { type: string, default: block }
      cursor-style-blink: { type: bool, default: false }
      scrollback-limit: { type: int, default: 50000 }
      clipboard-read: { type: string, default: allow }
      clipboard-write: { type: string, default: allow }
      clipboard-trim-trailing-spaces: { type: bool, default: true }
      copy-on-select: { type: string, default: clipboard }
      keybind: { type: list, items: string }
    values:
      theme: "Catppuccin Mocha"
      font-family: "JetBrainsMono Nerd Font"
      font-size: 14
      font-thicken: true
      adjust-cell-height: "10%"
      window-padding-x: 8
      window-padding-y: 8
      window-decoration: true
      macos-titlebar-style: tabs
      macos-option-as-alt: true
      confirm-close-surface: false
      shell-integration: detect
      shell-integration-features: "cursor,sudo,title"
      title: " "
      window-inherit-working-directory: true
      gtk-tabs-location: top
      cursor-style: block
      cursor-style-blink: false
      scrollback-limit: 50000
      clipboard-read: allow
      clipboard-write: allow
      clipboard-trim-trailing-spaces: true
      copy-on-select: clipboard
      keybind:
        - "super+d=new_split:right"
        - "super+shift+d=new_split:down"
        - "super+alt+left=goto_split:left"
        - "super+alt+right=goto_split:right"
        - "super+alt+up=goto_split:top"
        - "super+alt+down=goto_split:bottom"
        - "super+ctrl+left=resize_split:left,20"
        - "super+ctrl+right=resize_split:right,20"
        - "super+ctrl+up=resize_split:up,20"
        - "super+ctrl+down=resize_split:down,20"
        - "super+w=close_surface"
        - "super+t=new_tab"
        - "super+n=new_window"
        - "super+shift+left=previous_tab"
        - "super+shift+right=next_tab"
        - "super+1=goto_tab:1"
        - "super+2=goto_tab:2"
        - "super+3=goto_tab:3"
        - "super+4=goto_tab:4"
        - "super+5=goto_tab:5"
        - "super+6=goto_tab:6"
        - "super+7=goto_tab:7"
        - "super+8=goto_tab:8"
        - "super+9=last_tab"
        - "super+plus=increase_font_size:1"
        - "super+minus=decrease_font_size:1"
        - "super+0=reset_font_size"
        - "super+up=scroll_page_up"
        - "super+down=scroll_page_down"
        - "super+home=scroll_to_top"
        - "super+end=scroll_to_bottom"
        - "super+f=text:search"
        - "super+k=clear_screen"

# Installation configuration
install:
  tools:
    - name: ghostty
      description: GPU-accelerated terminal emulator
      check: "command -v ghostty"
      methods:
        darwin:
          type: brew
          package: ghostty
      post_install:
        message: "Run 'acorn ghostty config' to generate configuration"
