# Karabiner-Elements component configuration
name: karabiner
description: Karabiner-Elements keyboard customization (macOS)
version: 1.0.0

# Platform restriction
platforms: [darwin]

# Generated configuration files
files:
  - target: "~/.config/karabiner/karabiner.json"
    format: json
    platforms: [darwin]
    values:
      global:
        check_for_updates_on_startup: true
        show_in_menu_bar: true
        show_profile_name_in_menu_bar: false
      profiles:
        - name: "Default profile"
          selected: true
          parameters:
            delay_milliseconds_before_open_device: 1000
          virtual_hid_keyboard:
            country_code: 0
            mouse_key_xy_scale: 100
          simple_modifications: []
          complex_modifications:
            parameters:
              basic.simultaneous_threshold_milliseconds: 50
              basic.to_delayed_action_delay_milliseconds: 500
              basic.to_if_alone_timeout_milliseconds: 1000
              basic.to_if_held_down_threshold_milliseconds: 500
              mouse_motion_to_scroll.speed: 100
            rules: []
          fn_function_keys:
            - from:
                key_code: f1
              to:
                key_code: f1
            - from:
                key_code: f2
              to:
                key_code: f2
            - from:
                key_code: f3
              to:
                key_code: mission_control
            - from:
                key_code: f4
              to:
                key_code: f4
            - from:
                key_code: f5
              to:
                key_code: illumination_decrement
            - from:
                key_code: f6
              to:
                key_code: illumination_increment
            - from:
                key_code: f7
              to:
                consumer_key_code: rewind
            - from:
                key_code: f8
              to:
                consumer_key_code: play_or_pause
            - from:
                key_code: f9
              to:
                consumer_key_code: fastforward
            - from:
                key_code: f10
              to:
                consumer_key_code: mute
            - from:
                key_code: f11
              to:
                consumer_key_code: volume_decrement
            - from:
                key_code: f12
              to:
                consumer_key_code: volume_increment
          devices:
            # External keyboard (swap Cmd/Option for Windows layout)
            - identifiers:
                is_keyboard: true
                is_pointing_device: false
                product_id: 361
                vendor_id: 1241
              ignore: false
              disable_built_in_keyboard_if_exists: false
              manipulate_caps_lock_led: false
              fn_function_keys: []
              simple_modifications:
                - from:
                    key_code: end
                  to:
                    key_code: end
                - from:
                    key_code: left_command
                  to:
                    key_code: left_option
                - from:
                    key_code: left_option
                  to:
                    key_code: left_command
                - from:
                    key_code: right_command
                  to:
                    key_code: right_option
                - from:
                    key_code: right_option
                  to:
                    key_code: right_command
            # Built-in MacBook keyboard
            - identifiers:
                is_keyboard: true
                is_pointing_device: false
                product_id: 610
                vendor_id: 1452
              ignore: false
              disable_built_in_keyboard_if_exists: false
              manipulate_caps_lock_led: true
              fn_function_keys: []
              simple_modifications: []

# Installation configuration
install:
  tools:
    - name: karabiner-elements
      description: Keyboard customizer for macOS
      check: "test -d '/Applications/Karabiner-Elements.app'"
      methods:
        darwin:
          type: brew
          package: karabiner-elements
          cask: true
      post_install:
        message: "Karabiner-Elements installed. Grant accessibility permissions in System Preferences."
