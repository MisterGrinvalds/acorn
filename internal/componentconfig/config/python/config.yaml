# Python component configuration
name: python
description: Python development with UV package manager
version: 1.0.0

# Environment variables
env:
  ENVS_LOCATION: "${ENVS_LOCATION:-$HOME/.virtualenvs}"
  IPYTHONDIR: "${XDG_CONFIG_HOME:-$HOME/.config}/ipython"
  UV_CACHE_DIR: "${XDG_CACHE_HOME:-$HOME/.cache}/uv"

# Shell aliases
aliases:
  # Python shortcuts
  py: "python3"
  py2: "python2"
  pip: "pip3"
  # UV package manager
  uvs: "uv sync"
  uva: "uv add"
  uvr: "uv remove"
  uvx: "uv run"
  uvi: "uv init"
  # Virtual environment shortcuts
  mkv: "mkvenv"
  dv: "dvenv"

# Wrapper functions
wrappers:
  - name: lsvenv
    command: "acorn python venv list"

  - name: pyinit
    command: "acorn python init"

  - name: pysync
    command: "acorn python sync"

  - name: pyadd
    command: "acorn python add"

  - name: pyrm
    command: "acorn python remove"

  - name: pyrun
    command: "acorn python run"

  - name: pyenv
    command: "acorn python env"

  - name: setup_ipython
    command: "acorn python setup ipython"

  - name: setup_devtools
    command: "acorn python setup devtools"

# Shell functions (source, activate, deactivate)
shell_functions:
  # Create and activate virtual environment
  mkvenv: |
    local name="${1:-.venv}"
    acorn python venv new "$name"
    # Activate the environment after creation
    if [ -f "$name/bin/activate" ]; then
        . "$name/bin/activate"
        echo "Activated: $name"
    fi

  # Activate a Python virtual environment
  venv: |
    local name="${1:-.venv}"
    if [ -f "$name/bin/activate" ]; then
        . "$name/bin/activate"
    elif [ -n "$ENVS_LOCATION" ] && [ -f "$ENVS_LOCATION/$name/bin/activate" ]; then
        . "$ENVS_LOCATION/$name/bin/activate"
    else
        echo "Virtual environment not found: $name"
        return 1
    fi

  # Deactivate current virtual environment
  dvenv: |
    if [ -n "$VIRTUAL_ENV" ]; then
        deactivate
    else
        echo "No active virtual environment"
    fi

  # FastAPI development environment
  fastapi_env: |
    local name="${1:-.venv}"
    acorn python fastapi "$name"
    # Activate the environment after setup
    if [ -f "$name/bin/activate" ]; then
        . "$name/bin/activate"
        echo "Activated: $name"
    fi
